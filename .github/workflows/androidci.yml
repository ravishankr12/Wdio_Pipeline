name: Android UI Tests

on: [push]

permissions:
  contents: read      # To read repo content (needed for checking out code and report generation)
  actions: read       # To read the action metadata and logs
  secrets: read       # To access secrets (like BS_USER and BS_KEY) for BrowserStack
  packages: write     # To upload artifacts, i.e., the zipped Allure report (if required)

jobs:
  build:
    runs-on: ubuntu-22.04  # âœ… Use stable runner

    steps:
      - name: ðŸ§¾ Checkout repository
        uses: actions/checkout@v3

      - name: ðŸ”§ Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 18.0

      - name: ðŸ“¦ Install dependencies
        run: |
          echo "ðŸ“¦ Running npm install..."
          npm install
          echo "âœ… Dependencies installed."

      - name: ðŸ§ª Run Tests
        env:
          BS_USER: ${{ secrets.BS_USER }}
          BS_KEY: ${{ secrets.BS_KEY }}
        run: |
          echo "ðŸ§ª Starting tests with WebdriverIO..."
          npx wdio wdio.conf.js
          echo "âœ… Test run completed."
